"use strict";(()=>{var e={};e.id=706,e.ids=[706],e.modules={517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},4173:(e,r,a)=>{a.r(r),a.d(r,{headerHooks:()=>L,originalPathname:()=>T,patchFetch:()=>I,requestAsyncStorage:()=>y,routeModule:()=>_,serverHooks:()=>A,staticGenerationAsyncStorage:()=>g,staticGenerationBailout:()=>R});var t={};a.r(t),a.d(t,{GET:()=>C});var s=a(5419),n=a(9108),i=a(9678),u=a(8070),l=a(7147),c=a.n(l),o=a(1017),p=a.n(o),d=a(4740),m=a.n(d);let h=e=>e?parseFloat(e.replace(/[^0-9.-]+/g,"")):0,E=e=>{if(!e)return"CM";let r=e.toUpperCase();return r.includes("GOALKEEPER")?"GK":r.includes("CENTRE-BACK")?"CB":r.includes("LEFT-BACK")?"LB":r.includes("RIGHT-BACK")?"RB":r.includes("DEFENSIVE MIDFIELD")?"CDM":r.includes("CENTRAL MIDFIELD")?"CM":r.includes("ATTACKING MIDFIELD")?"CAM":r.includes("LEFT WINGER")?"LW":r.includes("RIGHT WINGER")?"RW":r.includes("CENTRE-FORWARD")||r.includes("SECOND STRIKER")?"ST":"CM"};async function C(e){let r=e.nextUrl.searchParams,a=r.get("query")?.toLowerCase(),t=r.get("club")?.toLowerCase(),s=parseInt(r.get("limit")||"20");try{let e=p().join(process.cwd(),"src","data","FOOTBALL_DATA_ACTIVE.csv"),r=c().readFileSync(e,"utf8"),n=m().parse(r,{header:!0,skipEmptyLines:!0}).data;t&&(n=n.filter(e=>e.current_club_name&&e.current_club_name.toLowerCase().includes(t))),a&&(n=n.filter(e=>e.player_name&&e.player_name.toLowerCase().includes(a)||e.current_club_name&&e.current_club_name.toLowerCase().includes(a)));let i=n.slice(0,s).map(e=>{let r=e.player_name;return r&&r.includes("(")&&r.includes(")")&&(r=r.replace(/\s*\(\d+\)$/,"").trim()),{id:e.player_id||Math.random().toString(36).substr(2,9),name:r,position:E(e.position),rating:75,value:h(e.market_value_in_eur),image:e.player_image_url||"https://via.placeholder.com/150",club:e.current_club_name}});return u.Z.json({players:i})}catch(e){return console.error("Error searching players:",e),u.Z.json({error:"Failed to search players"},{status:500})}}let _=new s.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/players/search/route",pathname:"/api/players/search",filename:"route",bundlePath:"app/api/players/search/route"},resolvedPagePath:"C:\\Users\\zulkp\\.gemini\\antigravity\\scratch\\fenerbahce-squad-builder\\src\\app\\api\\players\\search\\route.ts",nextConfigOutput:"",userland:t}),{requestAsyncStorage:y,staticGenerationAsyncStorage:g,serverHooks:A,headerHooks:L,staticGenerationBailout:R}=_,T="/api/players/search/route";function I(){return(0,i.patchFetch)({serverHooks:A,staticGenerationAsyncStorage:g})}}};var r=require("../../../../webpack-runtime.js");r.C(e);var a=e=>r(r.s=e),t=r.X(0,[638,740,206],()=>a(4173));module.exports=t})();